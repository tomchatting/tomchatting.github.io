<!doctype html>
<html lang=en>
<meta charset=utf-8>
<meta name=viewport content="initial-scale=1, minimum-scale=1, width=device-width">

<link rel="icon" type="image/png" href="/static/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/static/favicon-16x16.png" sizes="16x16">

<title>Dropping mysql_connect, or how I learned to PDO - Thomas Chatting üëª</title>
<link rel=stylesheet href=/static/main.css>

<header>
  <h1><a name=top href=/>Thomas Chatting üëª</a></h1>
</header>

<div id=container>
<div class="progress-container">
  <div class="progress-bar" id="myBar"></div>
</div>

<p><a href=/>‚Ü© Home</a></p>


<div class="with-sidebar">
  <div>
    <div class="not-sidebar">
      <article>
        <h1>Dropping mysql_connect, or how I learned to PDO</h1>
        <time datetime='2015-05-01'>01 May 2015</time>
      <p>So I finally got around to fixing the mySQL connector in Square:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="k">function</span> <span class="nf">database_connect</span><span class="p">(</span><span class="nv">$dbHost</span><span class="p">,</span> <span class="nv">$dbName</span><span class="p">,</span> <span class="nv">$dbUsername</span><span class="p">,</span> <span class="nv">$dbPassword</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">PDO</span><span class="p">(</span><span class="s2">"mysql:host=</span><span class="nv">$dbHost</span><span class="s2">;dbname=</span><span class="nv">$dbName</span><span class="s2">;charset=utf8"</span><span class="p">,</span> <span class="nv">$dbUsername</span><span class="p">,</span> <span class="nv">$dbPassword</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">PDOException</span> <span class="nv">$PDOexception</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">exit</span><span class="p">(</span><span class="s2">"&lt;p&gt;An error ocurred: Can't connect to database. &lt;/p&gt;&lt;p&gt;More preciesly: "</span><span class="o">.</span> <span class="nv">$PDOexception</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">()</span><span class="o">.</span> <span class="s2">"&lt;/p&gt;"</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Then it‚Äôs just a matter of replacing all your old calls (<em>this is why you should do things more procedurally, Tom</em>) in every instance you expected a mysql_ query and now receive a PDO object:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$db</span> <span class="o">=</span> <span class="nx">database_connect</span><span class="p">(</span><span class="nx">host</span><span class="p">,</span> <span class="nx">database</span><span class="p">,</span> <span class="nx">username</span><span class="p">,</span> <span class="nx">password</span><span class="p">);</span>
<span class="nv">$query</span> <span class="o">=</span> <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="s2">"SELECT * FROM posts"</span><span class="p">);</span>
<span class="nv">$posts</span> <span class="o">=</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">(</span><span class="nx">PDO</span><span class="o">::</span><span class="na">FETCH_ASSOC</span><span class="p">);</span></code></pre></figure>

<p>Insert your usual <code class="highlighter-rouge">for each $post in $posts</code> and you‚Äôre golden!</p>

<p><strong>Tl;dr</strong>: <em>just use Jekyll now, PHP is a bad language anyway.</em></p>

        <p>:-),</p>
<p>@<a href='//twitter.com/phenomenontom' target='_blank'>phenomenontom</a></p>

      </article>
    </div>
    <div class="sidebar">
      <h2>Current Spotify playlist</h2>
      <iframe src="https://open.spotify.com/embed/user/spotify/playlist/37i9dQZF1DWYqdkUCLfYzP" width="300" height="380" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
    </div>
  </div>
</div>

<hr>

<aside class=related>
  <h2>More like this</h2>
  <ul class='related-posts'>
  
  <li>
    <h3>
      <a href='/ramble/2018/01/25/powerbook-g4/'>
        my new typewriter - the powerbook g4 üçé
        <small><time datetime="2018-01-25T00:00:00+00:00">25 Jan 2018</time></small>
      </a>
    </h3>
  </li>
  
  <li>
    <h3>
      <a href='/ramble/2017/12/17/ipad-pro/'>
        ipad pro: the least ipad ipad yet üíª
        <small><time datetime="2017-12-17T00:00:00+00:00">17 Dec 2017</time></small>
      </a>
    </h3>
  </li>
  
  <li>
    <h3>
      <a href='/ramble/2017/08/30/you-should-watch-the-digimon-movie/'>
        you should watch the digimon movie üìΩ
        <small><time datetime="2017-08-30T00:00:00+01:00">30 Aug 2017</time></small>
      </a>
    </h3>
  </li>
  
  </ul>
</aside>

<script>
// When the user scrolls the page, execute myFunction
window.onscroll = function() {myFunction()};

function myFunction() {
  var winScroll = document.body.scrollTop || document.documentElement.scrollTop;
  var height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
  var scrolled = (winScroll / height) * 100;
  document.getElementById("myBar").style.width = scrolled + "%";
}
</script>

</div>

<footer>
  <p><b>Tom</b> is a 27 year old human who works in IT.</p>
  <p>Return to the <a href=#top>top</a>.</p>
</footer>

<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?skin=desert"></script>
