---
layout: post
title: "Dropping mysql_connect, or how I learned to PDO"
date: 2015-05-01 22:38
category: article
---

So I finally got around to fixing the mySQL connector in Square:

{% highlight php startinline=true %}
function database_connect($dbHost, $dbName, $dbUsername, $dbPassword) {
  try {
    return new PDO("mysql:host=$dbHost;dbname=$dbName;charset=utf8", $dbUsername, $dbPassword);
  } catch(PDOException $PDOexception) {
    exit("<p>An error ocurred: Can't connect to database. </p><p>More preciesly: ". $PDOexception->getMessage(). "</p>");
  }
}
{% endhighlight %}

Then it's just a matter of replacing all your old calls (*this is why you should do things more procedurally, Tom*) in every instance you expected a mysql_ query and now receive a PDO object:

{% highlight php startinline=true %}
$db = database_connect(host, database, username, password);
$query = $db->query("SELECT * FROM posts");
$posts = $query->fetch(PDO::FETCH_ASSOC);
{% endhighlight %}

Insert your usual `for each $post in $posts` and you're golden!

**Tl;dr**: *just use Jekyll now, PHP is a bad language anyway.*